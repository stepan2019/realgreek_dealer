function base64_encode(h){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var c,b,a,m,l,k,j,n,g=0,o=0,f="",e=[];if(!h){return h}h=this.utf8_encode(h+"");do{c=h.charCodeAt(g++);b=h.charCodeAt(g++);a=h.charCodeAt(g++);n=c<<16|b<<8|a;m=n>>18&63;l=n>>12&63;k=n>>6&63;j=n&63;e[o++]=d.charAt(m)+d.charAt(l)+d.charAt(k)+d.charAt(j)}while(g<h.length);f=e.join("");switch(h.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"=";break}return f}function utf8_encode(d){var b="";var h,a;var f=0;h=a=0;f=d.length;for(var g=0;g<f;g++){var e=d.charCodeAt(g);var c=null;if(e<128){a++}else{if(e>127&&e<2048){c=String.fromCharCode((e>>6)|192)+String.fromCharCode((e&63)|128)}else{c=String.fromCharCode((e>>12)|224)+String.fromCharCode(((e>>6)&63)|128)+String.fromCharCode((e&63)|128)}}if(c!==null){if(a>h){b+=d.substring(h,a)}b+=c;h=a=g+1}}if(a>h){b+=d.substring(h,d.length)}return b};